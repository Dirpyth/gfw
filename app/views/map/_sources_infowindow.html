<script>
  // TODO => Remove this and use DialogView
  window.infowindow = function() {
    var $backdrop = $('.backdrop'),
      $wind = $('#window'),
      $content = $wind.find('.content');

    $('.widget, .layer, .module').on('click', '.source', function(e) {
      e && e.preventDefault();
      e.stopPropagation ? e.stopPropagation() : window.event.cancelBubble = true;
      $backdrop.fadeIn();
      console.log('hola');
      var elem = '#' + $(e.currentTarget).data('source');
      $content.append($(elem).html())
      $wind.fadeIn();

      ga('send', 'event', 'Map', 'Info', 'Open '+elem);
    });

    $wind.find('.close').on('click', function(e) {
      e && e.preventDefault();
      $wind.fadeOut(0, function() {
        $content.empty();
        $backdrop.fadeOut(0);
      });
    });

   $('.backdrop').on('click', function(e) {
      e && e.preventDefault();
      $wind.fadeOut(0, function() {
        $content.empty();
        $backdrop.fadeOut(0);
      });
   });
  };
</script>




<div id="window" class="source_window" style="display: none;">
  <a href="#" class="close"><svg><use xlink:href="#shape-close"></use></svg></a>
  <div class="content" tabindex="0" style="overflow: hidden; padding: 0px;">
  </div>
</div>
